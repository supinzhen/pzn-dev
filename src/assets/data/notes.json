[
    {
        "title_zh": "ã€Unreal & DLL å¯¦æˆ°ã€‘ç¬¬ä¸€ç¯‡ï¼šæ¦‚å¿µèˆ‡ç³»çµ±è¨­è¨ˆ",
        "title_en": "Unreal & DLL in Practice â€” Part 1: Concepts and System Design",
        "category": "Unreal Engine",
        "date": "2026-02-26",
        "author": "Annie Su",
        "readTime": "20 min read",
        "tags": [
            "DLL",
            "Unreal Engine",
            "PLUGIN"
        ],
        "summary": "é€™ç¯‡æ–‡ç« å¾å¯¦éš›è¸©é›·ç¶“é©—å‡ºç™¼ï¼Œèªªæ˜ä»€éº¼æ˜¯ DLLï¼Œä»¥åŠç‚ºä»€éº¼åœ¨ Unreal Engine Plugin é–‹ç™¼ä¸­ï¼Œä½¿ç”¨ DLL æ˜¯æ›´å¯é çš„åšæ³•ã€‚",
        "content": "æ•…äº‹é–‹å§‹æ–¼æˆ‘å˜—è©¦æŠŠä¸€å€‹ç¬¬ä¸‰æ–¹å‡½å¼åº«ç›´æ¥å¡é€² Unreal Pluginï¼Œçµæœå®Œå…¨ä¸æ„å¤–ï¼Œå°ˆæ¡ˆç¬é–“ç‚¸è£‚ã€‚\n\né‚£ä¸€åˆ»æˆ‘æ‰çœŸæ­£æ„è­˜åˆ°ï¼šå¦‚æœè¦æŠŠå¤–éƒ¨åº«æ•´åˆé€² Unrealï¼Œåˆä¸æƒ³è®“æ•´å€‹å°ˆæ¡ˆè®Šæˆä¾è³´åœ°ç„ï¼Œå‹¢å¿…è¦æ‰¾ä¸€å€‹æ›´ä¹¾æ·¨ã€ç©©å®šã€å¯ç¶­è­·çš„æ–¹å¼ã€‚\n\næ–¼æ˜¯æˆ‘é–‹å§‹ç ”ç©¶æŠŠç¬¬ä¸‰æ–¹ç¨‹å¼ç¢¼åŒ…æˆ **Wrapper DLL**â€”â€”ç”¨ä¸€çµ„ç°¡å–®çš„ C é¢¨æ ¼ä»‹é¢ï¼ŒæŠŠ Unreal èˆ‡å¤–éƒ¨ä¸–ç•Œéš”é›¢é–‹ä¾†ã€‚é¸æ“‡ C ä»‹é¢çš„åŸå› å¾ˆå–®ç´”ï¼š**C ABI ç©©å®šã€è·¨ç·¨è­¯å™¨èˆ‡è·¨èªè¨€éƒ½æ¯”è¼ƒå‹å–„ã€‚**é€™ç¨®åšæ³•ä¸ä½†èƒ½ä¿ç•™æ•ˆèƒ½ï¼Œä¹Ÿèƒ½æŠŠ ABIã€ä¾‹å¤–è™•ç†ã€è¨˜æ†¶é«”ç®¡ç†ç­‰é«˜é¢¨éšªå•é¡Œé–åœ¨ DLL è£¡ï¼Œè®“ Plugin çš„ç”Ÿå‘½é€±æœŸæ›´å¯æ§ã€éƒ¨ç½²æ›´è¼•é¬†ã€‚\n\nä¹Ÿå› ç‚ºé€™æ¬¡çš„è¸©é›·ç¶“é©—ï¼Œæˆ‘æ±ºå®šåšä¸€å€‹å®Œæ•´çš„ç·´ç¿’å°ˆæ¡ˆï¼Œæ¡ç”¨ã€Œ**ç¬¬ä¸‰æ–¹å‡½å¼åº« â†’ Wrapper DLL â†’ Unreal Plugin**ã€çš„åˆ†å±¤æ¶æ§‹ã€‚å¾ç†è§£ DLL çš„è§’è‰²ã€å»ºç«‹ä¸€å€‹ç°¡å–®çš„ç¬¬ä¸‰æ–¹æ¸¬è©¦å‡½å¼åº«ã€å°‡å…¶åŒ…æˆ DLLï¼Œåˆ°æœ€å¾Œåœ¨ Unreal Engine ä¸­å»ºç«‹ Plugin ä¸¦æˆåŠŸå‘¼å« DLL è£¡çš„åŠŸèƒ½ï¼Œå®Œæ•´èµ°ä¸€éä¹¾æ·¨æ•´åˆçš„æµç¨‹ã€‚\n\nè®“æˆ‘å€‘é–‹å§‹å§ã€‚\n\n# æ‰€ä»¥ï¼Œåˆ°åº•ç”šéº¼æ˜¯ DLL?\n\nå‹•æ…‹é€£çµå‡½å¼åº«ï¼ˆDynamic-Link Libraryï¼Œç°¡ç¨± **DLL**ï¼‰æ˜¯ Windows ç”¨ä¾†å°è£èˆ‡å…±äº«ç¨‹å¼ç¢¼çš„ä¸€ç¨®æ©Ÿåˆ¶ã€‚ä½ åœ¨é›»è…¦è£¡å¸¸çœ‹åˆ°çš„ `.dll`ã€`.ocx`ã€`.drv`ï¼Œæœ¬è³ªä¸Šéƒ½æ˜¯åŒä¸€é¡å‹çš„æ¨¡çµ„ã€‚\n\nå®ƒçš„æ ¸å¿ƒæ¦‚å¿µå…¶å¯¦å¾ˆå–®ç´”ï¼š**æŠŠå¯ä»¥é‡è¤‡ä½¿ç”¨çš„åŠŸèƒ½ç¨ç«‹ç·¨è­¯æˆä¸€å€‹æª”æ¡ˆï¼Œéœ€è¦æ™‚å†ç”±æ‡‰ç”¨ç¨‹å¼è¼‰å…¥ä½¿ç”¨ï¼Œè€Œä¸å¿…æ¯å€‹ç¨‹å¼éƒ½è¤‡è£½ä¸€ä»½ã€‚**\n\né€™éº¼åšçš„å¥½è™•ï¼š\n\n- **ç¯€çœè¨˜æ†¶é«”èˆ‡ç£ç¢Ÿç©ºé–“** â€”â€” å¤šå€‹ç¨‹å¼å¯ä»¥å…±ç”¨åŒä¸€ä»½ç¨‹å¼ç¢¼ã€‚\n- **é›†ä¸­ç®¡ç†æ›´æ–°** â€”â€” ä¿®æ­£ DLL çš„å•é¡Œå¾Œï¼Œæ‰€æœ‰ä½¿ç”¨å®ƒçš„ç¨‹å¼éƒ½èƒ½ä½¿ç”¨æ–°çš„ DLLã€‚\n\nå¦‚æœè¦æ‰“å€‹æ¯”æ–¹ï¼ŒDLL æœ‰é»åƒåœ–æ›¸é¤¨è£¡çš„ä¸€æœ¬æ›¸ï¼Œå¾ˆå¤šäººå¯ä»¥åŒæ™‚é–±è®€åŒä¸€æœ¬æ›¸ï¼Œå°±åƒå¾ˆå¤šç¨‹å¼å¯ä»¥åŒæ™‚è¼‰å…¥åŒä¸€å€‹ DLLã€‚\n\nä¸åŒçš„æ˜¯ï¼Œåœ¨çœ‹æ›¸çš„éç¨‹ä¸­ï¼Œæ¯å€‹äººéƒ½æœƒåœ¨è‡ªå·±çš„ç­†è¨˜æœ¬ä¸Šåšç­†è¨˜ã€‚å°æ‡‰åˆ°é›»è…¦çš„ä¸–ç•Œï¼Œä½œæ¥­ç³»çµ±æœƒè®“ä¸åŒæ‡‰ç”¨ç¨‹å¼**å…±äº«åŒä¸€ä»½ DLL çš„ç¨‹å¼ç¢¼å€æ®µ**ï¼Œä½†æ¯å€‹ç¨‹å¼ä»ç„¶æ“æœ‰**è‡ªå·±çš„è³‡æ–™èˆ‡åŸ·è¡Œç‹€æ…‹**ã€‚\n\nä¹Ÿå°±æ˜¯èªªï¼Œé›–ç„¶ç¨‹å¼ç¢¼æ˜¯å…±ç”¨çš„ï¼Œä½†åŸ·è¡Œæ™‚çš„è¨˜æ†¶é«”èˆ‡è®Šæ•¸éƒ½æ˜¯å½¼æ­¤ç¨ç«‹çš„ã€‚\n\nä¸é DLL ä¹Ÿä¸æ˜¯æ²’æœ‰ç¼ºé»ã€‚æ—©æœŸçš„ Windows å› ç‚ºç¼ºä¹å®Œå–„çš„ç‰ˆæœ¬ç®¡ç†æ©Ÿåˆ¶ï¼Œåªè¦å¤šå€‹è»Ÿé«”å…±ç”¨åŒä¸€å€‹ DLLï¼Œå°±å¾ˆå®¹æ˜“å› ç‚º**ç‰ˆæœ¬ä¸ç›¸å®¹**ã€**å®‰è£ç¨‹å¼è¦†è“‹æ‰ç³»çµ± DLL**ï¼Œæˆ–æ˜¯**è·¯å¾‘è§£æéŒ¯èª¤**ï¼Œè®“åŸæœ¬é‹ä½œæ­£å¸¸çš„ç¨‹å¼çªç„¶æ•´æ‰¹æ›æ‰ã€‚é€™ç¨®å›  DLL å…±ç”¨è€Œå¼•ç™¼çš„é€£é–ç½é›£ï¼Œæœ‰ä¸€å€‹éå¸¸è²¼åˆ‡çš„åå­—ï¼š [DLLåœ°ç„ï¼ˆDLL Hellï¼‰](https://zh.wikipedia.org/zh-tw/DLL%E5%9C%B0%E7%8D%84)ã€‚\n\n## æœ‰å‹•æ…‹å‡½ç¤ºåº«ï¼Œé‚£æœ‰éœæ…‹çš„å—?\n\næ—¢ç„¶æœ‰ DLLï¼ˆå‹•æ…‹é€£çµå‡½å¼åº«ï¼‰ï¼Œé‚£ä¹Ÿæœƒæœ‰**éœæ…‹å‡½å¼åº«ï¼ˆStatic Libraryï¼‰**ã€‚åœ¨ Windows ä¸–ç•Œè£¡ï¼Œå®ƒé€šå¸¸æ˜¯ `.lib` æª”ï¼›åœ¨ Linux å‰‡æ˜¯ `.a` æª”ã€‚å…©è€…æœ€å¤§çš„å·®åˆ¥åœ¨æ–¼**ç¨‹å¼ç¢¼æ˜¯åœ¨ä»€éº¼æ™‚å€™è¢«æ”¾é€²ä½ çš„æ‡‰ç”¨ç¨‹å¼è£¡**ã€‚\n\néœæ…‹å‡½å¼åº«çš„é‹ä½œæ–¹å¼å¾ˆç›´æ¥ï¼šåœ¨ç·¨è­¯éšæ®µï¼Œç·¨è­¯å™¨æœƒæŠŠ `.lib` è£¡éœ€è¦çš„ç¨‹å¼ç¢¼ç›´æ¥è¤‡è£½åˆ°ä½ çš„å¯åŸ·è¡Œæª”æˆ– DLL è£¡ã€‚é€™ä»£è¡¨ï¼š\n\n- **ç·¨è­¯å¾Œçš„ç¨‹å¼ä¸éœ€è¦é¡å¤–çš„å¤–éƒ¨æª”æ¡ˆï¼Œ**çµ¦ä¸€å€‹ `.exe` å°±èƒ½è·‘ã€‚\n- å¯åŸ·è¡Œæª”æœƒè®Šå¤§ï¼Œä¸”æ›´æ–°å‡½å¼åº«æ™‚éœ€è¦é‡æ–°ç·¨è­¯æ•´å€‹å°ˆæ¡ˆã€‚\n\n> ğŸ’¡ **æƒ³åƒä½ æ­£åœ¨ç·¨å¯«ä¸€æœ¬æ›¸ï¼Œè€Œã€Œå‡½å¼åº«ã€å°±æ˜¯ä½ å¼•ç”¨çš„åƒè€ƒè³‡æ–™ï¼š**\n> \n\n### éœæ…‹å‡½å¼åº« (Static Lib)ï¼šå½±å°åº—æ¨¡å¼\n\né€™å°±åƒæ˜¯ä½ å»å½±å°åº—ï¼ŒæŠŠæ•´æœ¬åƒè€ƒæ›¸**å…¨éƒ¨è¤‡å°ä¸‹ä¾†ï¼Œç›´æ¥è£è¨‚é€²ä½ çš„æ›¸èƒŒå¾Œ**ã€‚\n\n- **å„ªé»**ï¼šè®€è€…è²·äº†ä½ çš„æ›¸ï¼Œç¿»åˆ°å¾Œé¢å°±èƒ½çœ‹è³‡æ–™ï¼ˆä¸éœ€è¦é¡å¤–å¸¶æ›¸ï¼Œéƒ¨ç½²ç°¡å–®ï¼‰ã€‚\n- **ç¼ºé»**ï¼šä½ çš„æ›¸æœƒè®Šå¾—å¾ˆåšå¾ˆé‡ï¼ˆåŸ·è¡Œæª”è®Šå¤§ï¼‰ï¼›å¦‚æœåŸç¨¿å…§å®¹æ›´æ–°äº†ï¼Œä½ å¾—æ•´æœ¬é‡æ–°è¤‡å°ä¸¦é‡æ–°è£è¨‚ï¼ˆé‡æ–°ç·¨è­¯æ•´å€‹å°ˆæ¡ˆï¼‰ã€‚\n\n### å‹•æ…‹å‡½å¼åº« (DLL)ï¼šåœ–æ›¸é¤¨æ¨™è¨»æ¨¡å¼\n\né€™å°±åƒæ˜¯ä½ åªåœ¨æ›¸è£¡å¯«äº†ä¸€è¡Œè¨»è§£ï¼šã€Œè«‹åƒè€ƒæŸæŸåœ–æ›¸é¤¨çš„æŸæŸæ›¸ç¬¬ 100 é ã€ã€‚\n\n- **å„ªé»**ï¼šä½ çš„æ›¸å¾ˆè¼•è–„ï¼Œä¸”å¦‚æœåœ–æ›¸é¤¨æ›´æ–°äº†æ›´æ­£ç¢ºçš„æ›¸ç±ï¼Œä½ çš„æ›¸å…§å®¹ä¹Ÿéš¨ä¹‹ã€Œå‡ç´šã€ï¼ˆé›†ä¸­ç®¡ç†æ›´æ–°ï¼‰ã€‚\n- **ç¼ºé»**ï¼šå¦‚æœè®€è€…å®¶é™„è¿‘æ²’æœ‰é‚£å€‹åœ–æ›¸é¤¨ï¼Œæˆ–è€…åœ–æ›¸é¤¨æŠŠæ›¸æ¬èµ°äº†ï¼Œä½ çš„æ›¸å°±æ²’æ³•è®€äº†ï¼ˆè·¯å¾‘éŒ¯èª¤æˆ– DLL éºå¤±ï¼Œå°è‡´ç¨‹å¼å´©æ½°ï¼‰ã€‚\n\n### æ··åˆæ¨¡å¼ (.lib + .dll)ï¼šéš¨æ›¸é™„è´ˆçš„å°èˆªåœ°åœ–\n\nç•¶ä½ åŒæ™‚æ“æœ‰é€™å…©è€…æ™‚ï¼Œ`.lib` å°±åƒæ˜¯**éš¨æ›¸é™„è´ˆçš„å°èˆªåœ°åœ–ï¼ˆæˆ–ç²¾ç¢ºç´¢å¼•ï¼‰**ã€‚\nä½ ä¸éœ€è¦å½±å°æ•´æœ¬æ›¸ï¼Œä½†ä½ éš¨æ›¸é™„ä¸Šä¸€å¼µç²¾ç¢ºçš„åœ°åœ–ã€‚é€™å¼µåœ°åœ–ï¼ˆ.libï¼‰åœ¨ç·¨è­¯æ™‚æœƒå‘Šè¨´ä½ çš„ç¨‹å¼ï¼šã€Œæ›¸ï¼ˆä»£ç¢¼ï¼‰ç¢ºå¯¦å­˜åœ¨ï¼Œå®ƒçš„åå­—å« `XXX.dll`ï¼Œè£¡é¢æœ‰é€™äº›åŠŸèƒ½ã€ã€‚\n\nçµæœå°±æ˜¯ç·¨è­¯å™¨å¾ˆæ”¾å¿ƒï¼ˆå› ç‚ºæœ‰åœ°åœ–è­‰æ˜æ›¸å­˜åœ¨ï¼‰ï¼ŒåŸ·è¡Œæ™‚ç³»çµ±ä¹Ÿå¾ˆè¼•é¬†ï¼ˆå› ç‚ºæœ‰åœ°åœ–å¼•å°å»å“ªè£¡å€Ÿæ›¸ï¼‰ã€‚\n\n| **ç‰¹æ€§** | **ç´”éœæ…‹å‡½å¼åº« (åªæœ‰å¤§ .lib)** | **æ··åˆæ¨¡å¼ï¼šéš±å¼å‹•æ…‹é€£çµ(å° .lib + .dll)** | **ç´”å‹•æ…‹ï¼šé¡¯å¼å‹•æ…‹é€£çµ(åªæœ‰ .dll)** |\n| --- | --- | --- | --- |\n| **ç™½è©±æ¯”å–»** | **ã€Œå½±å°åº—ã€**ï¼šå…§å®¹ç›´æ¥å°åœ¨æ›¸è£¡ | **ã€Œå°èˆªåœ°åœ–ã€**ï¼šæ‹¿è‘—åœ°åœ–å»åœ–æ›¸é¤¨å€Ÿæ›¸ | **ã€Œç›²æ‰¾ã€**ï¼šåˆ°åœ–æ›¸é¤¨æ‰æ‰“è½æ›¸åœ¨å“ª |\n| **é€£çµæ™‚é–“** | **ç·¨è­¯æ™‚** (Build Time) | **ç·¨è­¯æ™‚** (å°åœ°åœ–) + **åŸ·è¡Œæ™‚** (è¼‰å…¥æ›¸) | **åŸ·è¡Œæ™‚** (Runtime)å®Œå…¨ç”±ç¨‹å¼ç¢¼æ‰‹å‹•æ§åˆ¶ |\n| **ç¨‹å¼ç¢¼ä½ç½®** | **åµŒå…¥**åœ¨ `.exe` å…§éƒ¨ | **ç¨ç«‹**å­˜åœ¨æ–¼å¤–éƒ¨ DLL æª”æ¡ˆ | **ç¨ç«‹**å­˜åœ¨æ–¼å¤–éƒ¨ DLL æª”æ¡ˆ |\n| **éƒ¨ç½²é›£åº¦** | **æ¥µä½**ï¼šåªæœ‰ä¸€å€‹æª”æ¡ˆ | **ä¸­ç­‰**ï¼šé ˆç¢ºä¿ DLL è·Ÿè‘— .exe | **ä¸­ç­‰**ï¼šé ˆç¢ºä¿ DLL è·Ÿè‘— .exe |\n| **æ›´æ–°æ–¹å¼** | **å¿…é ˆé‡æ–°ç·¨è­¯**æ•´å€‹å°ˆæ¡ˆ | **ç›´æ¥æ› DLL** å³å¯æ›´æ–° | **ç›´æ¥æ› DLL** |\n| **è¨˜æ†¶é«”ä½”ç”¨** | **è¼ƒé«˜**ï¼šæ¯å€‹ç¨‹å¼éƒ½å«è¤‡æœ¬ | **è¼ƒä½**ï¼šå¤šå€‹ç¨‹å¼å…±ç”¨å…§å­˜ | **æœ€éˆæ´»**ï¼šä¸ç”¨æ™‚å¯å‹•æ…‹å¸è¼‰ |\n| **é–‹ç™¼é›£æ˜“åº¦** | **æ˜“**ï¼šç›´æ¥å‘¼å«å‡½å¼ | **æ˜“**ï¼šç›´æ¥å‘¼å«ï¼Œç·¨è­¯å™¨æœƒæª¢æŸ¥ | **é›£**ï¼šéœ€æ‰‹å‹•æŸ¥ä½å€ã€å¯«æŒ‡æ¨™ |\n| **Unreal å¸¸ç”¨åº¦** | å¸¸ç”¨æ–¼å°å‹å·¥å…·é¡ Plugin | **æœ€å¸¸ç”¨**ï¼šä¸»æµ SDK æ•´åˆæ–¹å¼ | é€²éšï¼šé©…å‹•ã€åŠ å¯†æˆ–ç†±æ›´æ–°æ¨¡çµ„ |\n\n## ç‚ºä»€éº¼ä¸ç›´æ¥æŠŠç¬¬ä¸‰æ–¹åŸå§‹ç¢¼æ”¾é€² Unreal Engineï¼Ÿ\n\né›–ç„¶ç›´æ¥æŠŠåˆ¥äººçš„åŸå§‹ç¢¼ï¼ˆSource Codeï¼‰ä¸Ÿé€²å°ˆæ¡ˆè³‡æ–™å¤¾çœ‹èµ·ä¾†æœ€çœäº‹ï¼Œä½†åœ¨ Unreal Engine é€™ç¨®å……æ»¿å„ç¨®è‡ªå®šç¾©çš„å·¨é›†çš„é‡é‡ç´šå·¨ç¸é¢å‰ï¼Œé€™ç¨®åšæ³•å°±åƒæ˜¯æƒ³æŠŠä¸€å°æ³•æ‹‰åˆ©çš„å¼•æ“ç›´æ¥ç„Šæ¥åœ¨å¡è»Šä¸Šï¼Œçµæœé€šå¸¸æ˜¯è»Šæ¯€äººäº¡ã€‚\n\n### 1. å‘½åç©ºé–“çš„ç›¸äº’è¡çª\n\nUnreal å®šç¾©äº†å¤§é‡çš„å…¨åŸŸå·¨é›†ï¼ˆä¾‹å¦‚ `check()`, `TEXT()`, `Verify()`ï¼‰ã€‚å¦‚æœç¬¬ä¸‰æ–¹åŸå§‹ç¢¼ï¼ˆä¾‹å¦‚ Boost æˆ– ffmpegï¼‰ä¹Ÿå®šç¾©äº†åŒåå‡½å¼ï¼Œç·¨è­¯å™¨æœƒå™´å‡ºå¹¾åƒå€‹éŒ¯èª¤è¨Šæ¯ï¼Œä½ å¾—èŠ±å¥½å¹¾é€±å»æ”¹åˆ¥äººçš„ç¨‹å¼ç¢¼æ‰èƒ½ç›¸å®¹ã€‚\n\n### 2. UHT çš„ç†è§£éšœç¤™\n\nUE çš„åå°„ç³»çµ±ï¼ˆè®“è—åœ–èƒ½è®€å– C++ï¼‰ä¾è³´ UHT æƒææ¨™é ­æª”ã€‚ä½† UHT ä¸¦ä¸æ˜¯çœŸæ­£çš„ç·¨è­¯å™¨ï¼Œå®ƒçœ‹ä¸æ‡‚ç¾ä»£ C++ å¤ªè¤‡é›œçš„æ¨¡æ¿ï¼ˆTemplateï¼‰æˆ–èªæ³•ç³–ã€‚ç›´æ¥å¡é€²å»ï¼ŒUHT æœƒç›´æ¥å ±éŒ¯ç½·å·¥ã€‚\n\n### 3. ç·¨è­¯æ™‚é–“è€ƒé‡\n\nUE æœ¬èº«å·²ç¶“å¤ å¤§äº†ã€‚å¦‚æœä½ æŠŠä¸€å€‹å¹¾è¬è¡Œçš„ç¬¬ä¸‰æ–¹åº«å¡é€²å°ˆæ¡ˆï¼Œæ¯æ¬¡ä½ æ”¹ä¸€å€‹å°åŠŸèƒ½ï¼Œç·¨è­¯å™¨å¯èƒ½éƒ½è¦é‡æ–°æª¢æŸ¥é‚£äº›æ²’å‹•éçš„ç¬¬ä¸‰æ–¹ä»£ç¢¼ã€‚\n\n- **ä½¿ç”¨ DLL çš„è§£æ³•**ï¼šDLL æ˜¯**é ç·¨è­¯å¥½çš„äºŒé€²ä½æª”æ¡ˆ**ã€‚å° UE ä¾†èªªï¼Œå®ƒå°±åƒä¸€å€‹ã€Œé»‘ç›’å­ã€ï¼Œä¸éœ€è¦é‡æ–°ç·¨è­¯ï¼Œåªéœ€è¦ã€Œé€£çµã€å®ƒã€‚é€™èƒ½ç¯€çœä½ æ¯å¤©å¹¾å°æ™‚çš„ç­‰å¾…æ™‚é–“ã€‚\n\n## çµè«–ï¼šDLL æ˜¯ä¸€ç¨®éš”é›¢ç‰†\n\nåœ¨é–‹ç™¼ä¸­ï¼Œé€šå¸¸æœƒæŠŠç¬¬ä¸‰æ–¹åŸå§‹ç¢¼å°è£æˆ DLLï¼Œé€™æœ¬è³ªä¸Šæ˜¯åœ¨ Unreal èˆ‡å¤–éƒ¨ç¨‹å¼ç¢¼ä¹‹é–“è“‹èµ·ä¸€é“é˜²è­·ç‰†ï¼š\n\n- **ç‰†å…§ï¼ˆDLL å…§éƒ¨ï¼‰ï¼š** ä½ æ„›æ€éº¼å¯«å°±æ€éº¼å¯«ï¼Œèªæ³•å†æ€ªã€è·Ÿ UE å‘½åè¡çªéƒ½æ²’é—œä¿‚ï¼Œå®ƒæ˜¯ä¸€å€‹ç¨ç«‹é‹ä½œçš„é»‘ç›’å­ã€‚\n- **ç‰†å¤–ï¼ˆUE å°ˆæ¡ˆï¼‰ï¼š** é€éé‚£å¼µå°å°çš„**åœ°åœ–ï¼ˆ.libï¼‰**ä¾†å‘¼å«åŠŸèƒ½å°±å¥½ï¼Œä¸éœ€è¦çŸ¥é“è£¡é¢ç™¼ç”Ÿäº†ä»€éº¼äº‹ã€‚\n\n**é€™å°±æ˜¯ç‚ºä»€éº¼ä¸æœƒæŠŠç¬¬ä¸‰æ–¹åŸå§‹ç¢¼ç›´æ¥ä¸Ÿé€² UEï¼šå› ç‚º DLL è®“ä½ åªéœ€è¦é€£çµå®ƒï¼Œè€Œä¸éœ€è¦ä¼ºå€™å®ƒã€‚**\n\nå¯«å¾—æœ‰é»å¤šï¼Œçµè«–æ˜¯æ‰€ä»¥é€™ç³»åˆ—çš„æ–‡ç« æœƒæ¡ç”¨ã€Œ**ç¬¬ä¸‰æ–¹å‡½å¼åº« â†’ Wrapper DLL â†’ Unreal Plugin**ã€çš„åˆ†å±¤æ¶æ§‹ï¼Œä¸€æ­¥æ­¥çš„å°‡è£½ä½œéç¨‹è¨˜éŒ„ä¸‹ä¾†ã€‚\n\n### ğŸ“– è³‡æ–™ä¾†æº\n\n- **Microsoft å®˜æ–¹æ–‡ä»¶**ï¼š[é€£çµå™¨è¼¸å…¥æª” (.lib)](https://learn.microsoft.com/en-us/cpp/build/reference/dot-lib-files-as-linker-input)\n- **Unreal Engine å®˜æ–¹æŒ‡å—**ï¼š[æ•´åˆç¬¬ä¸‰æ–¹ç¨‹å¼åº«åˆ° Unreal](https://dev.epicgames.com/documentation/en-us/unreal-engine/integrating-third-party-libraries-into-unreal-engine)\n- **UE ç·¨è­¯æ¶æ§‹**ï¼š[Unreal Build Tool (UBT) é‹ä½œåŸç†](https://dev.epicgames.com/documentation/en-us/unreal-engine/unreal-build-tool-in-unreal-engine)",
        "id": 10,
        "title": "Unreal & DLL in Practice â€” Part 1: Concepts and System Design",
        "slug": "unreal-dll-in-practice-part-1-concepts-and-system-design"
    },
    {
        "title_zh": "ST 2110 IP Video Workflow: Unreal Engine to AJA Kona IP via Rivermax",
        "title_en": "ST 2110 IP Video Workflow: Unreal Engine to AJA Kona IP via Rivermax",
        "category": "Unreal Engine",
        "date": "2026-02-23",
        "author": "Annie Su",
        "readTime": "5 min read",
        "tags": [
            "Nvidia Rivermax",
            "Unreal Engine"
        ],
        "summary_zh": "",
        "summary_en": "",
        "content_zh": "# ç³»çµ±ç¸½è¦½\n\næœ¬ç³»çµ±ä»¥ NVIDIA Mellanox ConnectXâ€‘6 ç³»åˆ—ç¶²è·¯ä»‹é¢å¡ èˆ‡ NVIDIA Rivermax SDK ç‚ºæ ¸å¿ƒï¼Œå»ºç½®ä¸€æ¢ç¬¦åˆ SMPTE ST 2110 çš„å°ˆæ¥­ç´š IP è¦–è¨Šå‚³è¼¸æµç¨‹ã€‚Unreal Engine è² è²¬å³æ™‚æ¸²æŸ“å½±åƒï¼Œä¸¦é€é Rivermax å°‡å½±åƒä»¥ ST 2110â€‘20æ ¼å¼é€å‡ºï¼›æ¥æ”¶ç«¯æ¡ç”¨ AJA Kona IP é€²è¡Œè¦–è¨Šè§£ç¢¼èˆ‡ç›£çœ‹ã€‚\næ•´é«”è¨Šè™Ÿè·¯ç”±èˆ‡ä¾†æºåˆ‡æ›å‰‡ç”± Cerebrum Broadcast Controller é€é NMOS ISâ€‘04 / ISâ€‘05 é€²è¡Œçµ±ä¸€ç®¡ç†èˆ‡æ§åˆ¶ã€‚\n\n[Using SMPTE 2110 with nDisplay | Unreal Engine 5.7 Documentation | Epic Developer Community](https://dev.epicgames.com/documentation/en-us/unreal-engine/using-smpte-2110-with-ndisplay)\n\n# Nvidia Rivermax\n\n# ç³»çµ±æ¶æ§‹åœ–\n\næœ¬ç³»çµ±ç”±ä¸‰å°ä¸»æ©Ÿæ§‹æˆï¼Œé€é 10G ç¶²è·¯èˆ‡ç®¡ç†äº¤æ›å™¨ä¸²è¯ï¼Œå¯¦ç¾ ST 2110 è¦–è¨Šå‚³è¼¸èˆ‡ NMOS æ§åˆ¶æ•´åˆï¼š\n\n![image.png](image.png)\n\n## PC 1ï¼šUnreal Engine æ¸²æŸ“èˆ‡ Rivermax å‚³é€ç«¯\n\n- å®‰è£ Unreal Engine èˆ‡ NVIDIA Rivermax SDK\n- æ­è¼‰ ConnectXâ€‘6 Lx ç¶²è·¯å¡ï¼Œæ”¯æ´ ST 2110 è¨Šè™Ÿå‚³è¼¸\n- é€é 10G DAC ç·šç›´æ¥é€£æ¥è‡³æ¥æ”¶ç«¯ï¼ˆPC 2ï¼‰ï¼Œå‚³é€ ST 2110â€‘20 / 22 è¦–è¨Šæµ\n\n| å…ƒä»¶ | ç‰ˆæœ¬ |\n| --- | --- |\n| ä½œæ¥­ç³»çµ± | Windows 10 Pro 22H2 |\n| Unreal Engine | Unreal Engine 5.6.1 |\n| NVIDIA Rivermax SDK | Rivermax_Windows_1.60.6 |\n| ConnectXâ€‘6 Lx é©…å‹• | 3.10.25798.0 |\n| ConnectXâ€‘6 Lx Firmware | 26.47.1026 |\n| MFTï¼ˆMellanox Firmware Toolsï¼‰ | WinMFT_x64_4_34_1_10 |\n\n<aside>\nğŸ’¡\n\nConnect-X 6 é™åˆ¶ï¼šæ­¤ç³»åˆ— NIC é›–å—æ”¯æ´ï¼Œä½†åœ¨ Windows ä¸Šç„¡æ³•æä¾›å®Œæ•´ PTP ç²¾æº–åº¦ã€‚ [[i]](https://dev.epicgames.com/documentation/en-us/unreal-engine/setting-up-smpte-2110-in-unreal-engine#supported-network-cards)\n\n</aside>\n\n## PC 2ï¼šAJA Kona IP æ¥æ”¶ç«¯\n\n- æ­è¼‰ AJA Kona IP å¡ï¼Œæ”¯æ´ ST 2110 ç·¨è§£ç¢¼ï¼Œæ¥æ”¶/ç™¼é€ ST 2110 æµ\n- æ‰€å–å¾—çš„ ST 2110 è¨Šè™Ÿå¯ä»¥ä¾› ZD å·¥å…·ã€AJA Control Roomã€OBS ç­‰è»Ÿé«”æ¥æ”¶èˆ‡ç›£çœ‹\n- ä¸¦å¯é€é NMOS æ§åˆ¶ä¾†æºåˆ‡æ›\n\n| å…ƒä»¶ | ç‰ˆæœ¬ |\n| --- | --- |\n| ä½œæ¥­ç³»çµ± | Windows 11 Pro 25H2 |\n| AJA Kona IP Driver | v17.0 |\n| AJA Control Room | v17.0 |\n| AJA Firmware | KonaIP s2110 - 2023/02/28 |\n\n## PC 3ï¼šCerevrum Broadcast Controller æ§åˆ¶ç«¯\n\n- åŸ·è¡Œ Cerevrum æ§åˆ¶è»Ÿé«”ï¼Œä¸¦è¨»å†Šè‡³ NMOS Registry\n- é€é ISâ€‘05 å”å®šæ§åˆ¶ Kona IP çš„æ¥æ”¶ä¾†æº\n- é€£æ¥è‡³ç®¡ç†äº¤æ›å™¨ï¼ˆMGMTï¼‰ï¼Œèˆ‡å…¶ä»–ç¯€é»é€²è¡Œ NMOS è¨»å†Šèˆ‡æ§åˆ¶é€šè¨Š\n\nğŸ”— ç¶²è·¯é€£ç·šæ¦‚è¿°\n\n- **10G DAC ç›´é€£ï¼š** PC 1 â†’ PC 2ï¼Œå‚³é€ ST 2110 è¦–è¨Šæµ\n- **MGMT ç®¡ç†äº¤æ›å™¨ï¼š** ä¸‰å°ä¸»æ©Ÿçš†é€£æ¥è‡³æ­¤äº¤æ›å™¨ï¼Œç”¨æ–¼ NMOS æ§åˆ¶èˆ‡ç®¡ç†é€šè¨Š\n\n# å®‰è£èˆ‡è¨­å®šæµç¨‹\n\n## å®‰è£ ConnectXâ€‘6 Lx éŸŒé«”æ›´æ–°\n\n1. è‡³ https://network.nvidia.com/support/firmware/mlxup-mft/ é é¢ï¼Œé¸æ“‡ç›¸å°æ‡‰çš„ç‰ˆæœ¬ä¸¦ä¸‹è¼‰éŸŒé«”æ›´æ–°å·¥å…·ã€‚\n2. è‡³ https://network.nvidia.com/support/firmware/firmware-downloads/ é é¢ï¼Œä¸‹è¼‰æ‰€éœ€è¦çš„éŸŒé«”ã€‚\n3. [**Updating Firmware Using a Specific Image**](https://docs.nvidia.com/networking/display/mlxupfwutility#src-49167189_mlxupFirmwareUtilityUserGuide-UpdatingFirmwareUsingaSpecificImage)\n    \n    In order to update the firmware of all NVIDIA adapter cards using a specific firmware image, run the following command:\n    \n    ```bash\n    mlxup -i <file path>\n    ```\n    \n\n## å®‰è£ ConnectXâ€‘6 Lx Windows é©…å‹•ç¨‹å¼ WibOF-2 https://docs.nvidia.com/nvidia-connectx-6-lx-pcie-hhhl-ethernet-adapter-cards-user-manual.pdf\n\n1. è‡³ https://network.nvidia.com/products/adapter-software/ethernet/windows/winof-2/ é é¢ï¼Œé€™æ˜¯ NVIDIA å®˜æ–¹çš„ Windows é©…å‹•ã€‚\n2. é¸æ“‡å°æ‡‰ä½œæ¥­ç³»çµ±çš„é©…å‹•ç¨‹å¼ï¼Œä¸¦ä¸‹è¼‰ã€‚\n3. åŸ·è¡Œä¸¦å®Œæˆå®‰è£ï¼Œå®‰è£å®Œæˆå¾Œé‡é–‹æ©Ÿã€‚\n4. å®‰è£æˆåŠŸå¾Œæœƒåœ¨å·¥ä½œç®¡ç†å“¡çœ‹åˆ°æ­¤ç¶²å¡ã€‚\n    \n    ![image.png](f7bd6e4e-4dd0-4d97-b0a5-d6f13dba56e5.png)\n    \n\n## å®‰è£ Nvidia Rivermax\n\n1. é€²å…¥ Rivermax Getting Start Page https://developer.nvidia.com/networking/rivermax-getting-started (éœ€è¦ç™»å…¥ä¸¦ç”³è«‹æ¬Šé™æ‰èƒ½é€²å…¥é é¢)\n2. å¾ä¸‹è¼‰å€ç€è¦½å„å€‹ç‰ˆæœ¬çš„ Realease Noteï¼Œå°‹æ‰¾ç¬¦åˆè‡ªå·±ç¶²å¡çš„ç‰ˆæœ¬ï¼Œæœ¬å°ˆæ¡ˆä½¿ç”¨ Rivermax_Windows_1.60.6ã€‚\n3. è·Ÿè‘— Installation Guide å®‰è£ï¼Œç”±æ–¼æˆ‘å€‘å·²ç¶“å®‰è£å®Œ WinOF-2 ï¼Œå› æ­¤ç›´æ¥å®‰è£ Rivermaxã€‚\n4. ä½¿ç”¨**ç³»çµ±ç®¡ç†å“¡èº«åˆ†**é–‹å•Ÿå‘½ä»¤æç¤ºå­—å…ƒï¼Œå»åˆ° Rivermax-<Version>-win64.msi æ‰€æ”¾ç½®çš„è³‡æ–™å¤¾ï¼ŒåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š\n    \n    ```jsx\n    Rivermax-<Version>-win64.msi\n    ```\n    \n5. æœƒè·³å‡ºå®‰è£é é¢ï¼š\n    \n    ![image.png](image%201.png)\n    \n6. è·Ÿè‘—å®‰è£æŒ‡ç¤ºå®‰è£ä¸¦å°‡é›»è…¦é‡é–‹æ©Ÿã€‚\n\n## [NVIDIAâ€™s Rivermax SDK License](https://dev.epicgames.com/documentation/en-us/unreal-engine/setting-up-smpte-2110-in-unreal-engine#license)\n\nè«‹è‡³å®˜æ–¹ç¶²ç«™ç”³è«‹ Rivermax é–‹ç™¼æˆæ¬Šï¼šhttps://developer.nvidia.com/rivermax-development-licence-request\nå–å¾—æˆæ¬Šæª”å¾Œï¼Œå°‡å…¶æ”¾ç½®æ–¼ Rivermax DLL æ‰€åœ¨ç›®éŒ„ï¼Œç³»çµ±é è¨­æœƒåœ¨è©²ä½ç½®å°‹æ‰¾æˆæ¬Šæª”ã€‚\nè‹¥å¸Œæœ›å°‡æˆæ¬Šæª”æ”¾åœ¨å…¶ä»–ä½ç½®ï¼ˆä¾‹å¦‚ç¶²è·¯ç£ç¢Ÿæ©Ÿï¼‰ï¼Œå¯ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ï¼š`RIVERMAX_LICENSE_PATH` æŒ‡å®šè‡ªè¨‚çš„æˆæ¬Šæª”è·¯å¾‘ã€‚\n\n## Unreal Rivermax è¨­å®š\n\né–‹å•Ÿä»¥ä¸‹ Plugin ä¸¦é‡å•Ÿ Unreal Editorã€‚\n\n![image.png](f3e873c5-e214-474c-afdb-6b0ca9bdccbb.png)\n\n![image.png](6ac45fbc-0d42-4c59-9ec1-d22a178e4b2d.png)\n\n![image.png](c14ccf70-a316-45be-90f3-4215fbf8c5ce.png)\n\n[SMPTE 2110 UX Reference in Unreal Engine | Unreal Engine 5.6 Documentation | Epic Developer Community](https://dev.epicgames.com/documentation/en-us/unreal-engine/smpte-2110-ux-reference-in-unreal-engine?application_version=5.6)\n\n[SMPTE 2110 Media IO Workflows in Unreal Engine | Unreal Engine 5.6 Documentation | Epic Developer Community](https://dev.epicgames.com/documentation/en-us/unreal-engine/smpte-2110-media-io-workflows-in-unreal-engine?application_version=5.6)\n\n## **Troubleshooting SMPTE 2110**\n\n### Rainbow-colored Video When Opening RivermaxMediaSource\n\nè‹¥åœ¨é–‹å•Ÿ **RivermaxMediaSource** æ™‚çœ‹åˆ°ã€Œå½©è™¹è‰²ï¼ˆrainbow-coloredï¼‰ã€å½±åƒï¼Œè€Œé€™ä¸¦éé æœŸè¡Œç‚ºï¼Œè«‹ç¢ºèª ConnectX NIC çš„ FLEX Parser è¨­å®šæ˜¯å¦æ­£ç¢ºã€‚\n\n1. å®‰è£ `mlxconfig`ï¼ˆMellanox Firmware Tools, MFTï¼‰ï¼šhttps://network.nvidia.com/products/adapter-software/firmware-tools/ ã€‚`mlxconfig` æ˜¯ Mellanox Firmware Toolsï¼ˆMFTï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ–¼æŸ¥è©¢èˆ‡è¨­å®š ConnectX NIC çš„ç¡¬é«”åƒæ•¸ã€‚\n2. é©—è­‰ FLEX Parser è¨­å®š\n    \n    ä½¿ç”¨ç³»çµ±ç®¡ç†å“¡èº«åˆ†åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œç¢ºèªå…©å€‹åƒæ•¸çš„è¼¸å‡ºæ˜¯å¦ä¸€è‡´ï¼š\n    \n    ```jsx\n    mlxconfig.exe q | findstr \"FLEX_PARSER_PROFILE_ENABLE PROG_PARSE_GRAPH\"\n    ```\n    \n    [è«‹ç¢ºä¿é€™å…©å€‹åƒæ•¸çš„è¼¸å‡ºå…§å®¹å®Œå…¨ä¸€è‡´ã€‚](https://dev.epicgames.com/community/api/documentation/image/65a2f86a-54c9-45df-a99a-f1d73229b093?resizing_type=fit)\n    \n    è«‹ç¢ºä¿é€™å…©å€‹åƒæ•¸çš„è¼¸å‡ºå…§å®¹å®Œå…¨ä¸€è‡´ã€‚\n    \n    è‹¥ä¸ä¸€è‡´ï¼Œå¯èƒ½å°è‡´ NIC ç„¡æ³•æ­£ç¢ºè§£æ RTP Headerï¼Œé€ æˆå½±åƒå‘ˆç¾å½©è™¹è‰²æˆ–éŒ¯ä½ã€‚\n    \n3. å¦‚ä¸ä¸€è‡´ï¼Œè«‹ä½¿ç”¨ç³»çµ±ç®¡ç†å“¡èº«åˆ†åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤æŸ¥è©¢è£ç½®åç¨±ï¼š\n    \n    ```jsx\n    mst status\n    ```\n    \n    å¦‚æœæœå‹™æœªå•Ÿå‹•ï¼Œè«‹è¼¸å…¥ï¼š\n    \n    ```jsx\n    mst start\n    ```\n    \n    ç„¶å¾Œå†è¼¸å…¥ `mst status` æœƒçœ‹åˆ°é¡ä¼¼ä¸‹åˆ—è¼¸å‡ºï¼š\n    \n    ![image.png](image%202.png)\n    \n    åœ–ä¸­ mt4127_pciconf0 ä½ç½®çš„å€¼å³ç‚ºä½ çš„è£ç½®åç¨±ã€‚\n    \n4. å¡«å…¥ä½ çš„è£ç½®åç¨±ï¼Œè¼¸å…¥ä¸‹åˆ—æŒ‡ä»¤æ›´æ”¹è¨­å®šï¼š\n    \n    ```jsx\n    mlxconfig.exe -d <ä½ çš„è£ç½®åç¨±> set FLEX_PARSER_PROFILE_ENABLE=1\n    mlxconfig.exe -d <ä½ çš„è£ç½®åç¨±> set PROG_PARSE_GRAPH=1\n    mlxconfig.exe -d <ä½ çš„è£ç½®åç¨±> reset\n    ```\n    \n    å¦‚ï¼š\n    \n    ```jsx\n    mlxconfig.exe -d mt4127_pciconf0 set FLEX_PARSER_PROFILE_ENABLE=1\n    mlxconfig.exe -d mt4127_pciconf0 set PROG_PARSE_GRAPH=1\n    mlxconfig.exe -d mt4127_pciconf0 reset\n    ```\n    \n5. æ›´æ”¹å®Œå¾Œè¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ç¢ºèªè¼¸å‡ºï¼š\n    \n    ```jsx\n    mlxconfig.exe q | findstr \"FLEX_PARSER_PROFILE_ENABLE PROG_PARSE_GRAPH\"\n    ```\n    \n\n# å¾ŒçºŒç ”ç©¶æ–¹å‘\n\n## GPU Direct\n\n- ç ”ç©¶ Rivermax èˆ‡ GPUDirect çš„æ•´åˆæ–¹å¼ï¼Œè©•ä¼°æ˜¯å¦èƒ½è®“å½±åƒè³‡æ–™ç›´æ¥åœ¨ GPU èˆ‡ NIC ä¹‹é–“å‚³è¼¸ï¼Œæ¸›å°‘ CPU ä»‹å…¥ã€‚\n- æ¸¬è©¦ Unreal Engine åœ¨å•Ÿç”¨ GPUDirect æ™‚çš„å»¶é²æ”¹å–„å¹…åº¦ï¼Œä¸¦ç¢ºèªä¸åŒ GPU/NIC/Driver çµ„åˆçš„ç›¸å®¹æ€§ã€‚\n\n## NMOS for Rivermaxï¼ˆISâ€‘04 / ISâ€‘05ï¼‰\n\n- ç ”ç©¶ Rivermax æ˜¯å¦èƒ½é€é NMOS API èˆ‡ç¾æœ‰çš„ Broadcast Controllerï¼ˆå¦‚ Cerebrumã€VSMã€Evertz Magnumï¼‰é€²è¡Œè‡ªå‹•åŒ–è¨»å†Šèˆ‡è·¯ç”±ã€‚\n- å»ºç«‹ UE â†’ NMOS â†’ 2110 Receiver çš„å®Œæ•´æ§åˆ¶æµç¨‹ï¼Œè®“ Unreal Engine æˆç‚ºå¯è¢« NMOS ç®¡ç†çš„ã€ŒSender Nodeã€ã€‚\n- è©•ä¼°æ˜¯å¦èƒ½å°‡ Unreal Engine çš„ 2110 Stream Metadataï¼ˆFormatã€Framerateã€Colorimetryï¼‰è‡ªå‹•åŒæ­¥åˆ° NMOS Registryã€‚\n\n## ST 2022â€‘7 Seamless Switching\n\n- ç ”ç©¶ Unreal Engine + Rivermax æ˜¯å¦èƒ½åŒæ™‚è¼¸å‡º **A/B é›™è·¯ 2110 Stream**ï¼Œä»¥æ”¯æ´ 2022â€‘7 çš„ç„¡ç¸«åˆ‡æ›ã€‚\n- æ¸¬è©¦æ¥æ”¶ç«¯ï¼ˆå¦‚ AJA Kona IPã€Grass Valleyã€Imagineã€Sonyï¼‰åœ¨ 2022â€‘7 ä¸‹çš„åˆ‡æ›å»¶é²èˆ‡å®¹éŒ¯èƒ½åŠ›ã€‚\n- æ¢ç´¢æ˜¯å¦èƒ½åœ¨ UE å…§éƒ¨å»ºç«‹ã€Œé›™ç·¨ç¢¼è·¯å¾‘ã€æˆ–ã€Œé›™ NICã€æ¶æ§‹ï¼Œä»¥æ”¯æ´é«˜å¯é åº¦çš„ Live Production Pipelineã€‚",
        "content_en": "",
        "id": 5,
        "title": "ST 2110 IP Video Workflow: Unreal Engine to AJA Kona IP via Rivermax",
        "slug": "st-2110-ip-video-workflow-unreal-engine-to-aja-kona-ip-via-rivermax",
        "summary": "",
        "content": "# ç³»çµ±ç¸½è¦½\n\næœ¬ç³»çµ±ä»¥ NVIDIA Mellanox ConnectXâ€‘6 ç³»åˆ—ç¶²è·¯ä»‹é¢å¡ èˆ‡ NVIDIA Rivermax SDK ç‚ºæ ¸å¿ƒï¼Œå»ºç½®ä¸€æ¢ç¬¦åˆ SMPTE ST 2110 çš„å°ˆæ¥­ç´š IP è¦–è¨Šå‚³è¼¸æµç¨‹ã€‚Unreal Engine è² è²¬å³æ™‚æ¸²æŸ“å½±åƒï¼Œä¸¦é€é Rivermax å°‡å½±åƒä»¥ ST 2110â€‘20æ ¼å¼é€å‡ºï¼›æ¥æ”¶ç«¯æ¡ç”¨ AJA Kona IP é€²è¡Œè¦–è¨Šè§£ç¢¼èˆ‡ç›£çœ‹ã€‚\næ•´é«”è¨Šè™Ÿè·¯ç”±èˆ‡ä¾†æºåˆ‡æ›å‰‡ç”± Cerebrum Broadcast Controller é€é NMOS ISâ€‘04 / ISâ€‘05 é€²è¡Œçµ±ä¸€ç®¡ç†èˆ‡æ§åˆ¶ã€‚\n\n[Using SMPTE 2110 with nDisplay | Unreal Engine 5.7 Documentation | Epic Developer Community](https://dev.epicgames.com/documentation/en-us/unreal-engine/using-smpte-2110-with-ndisplay)\n\n# Nvidia Rivermax\n\n# ç³»çµ±æ¶æ§‹åœ–\n\næœ¬ç³»çµ±ç”±ä¸‰å°ä¸»æ©Ÿæ§‹æˆï¼Œé€é 10G ç¶²è·¯èˆ‡ç®¡ç†äº¤æ›å™¨ä¸²è¯ï¼Œå¯¦ç¾ ST 2110 è¦–è¨Šå‚³è¼¸èˆ‡ NMOS æ§åˆ¶æ•´åˆï¼š\n\n![image.png](image.png)\n\n## PC 1ï¼šUnreal Engine æ¸²æŸ“èˆ‡ Rivermax å‚³é€ç«¯\n\n- å®‰è£ Unreal Engine èˆ‡ NVIDIA Rivermax SDK\n- æ­è¼‰ ConnectXâ€‘6 Lx ç¶²è·¯å¡ï¼Œæ”¯æ´ ST 2110 è¨Šè™Ÿå‚³è¼¸\n- é€é 10G DAC ç·šç›´æ¥é€£æ¥è‡³æ¥æ”¶ç«¯ï¼ˆPC 2ï¼‰ï¼Œå‚³é€ ST 2110â€‘20 / 22 è¦–è¨Šæµ\n\n| å…ƒä»¶ | ç‰ˆæœ¬ |\n| --- | --- |\n| ä½œæ¥­ç³»çµ± | Windows 10 Pro 22H2 |\n| Unreal Engine | Unreal Engine 5.6.1 |\n| NVIDIA Rivermax SDK | Rivermax_Windows_1.60.6 |\n| ConnectXâ€‘6 Lx é©…å‹• | 3.10.25798.0 |\n| ConnectXâ€‘6 Lx Firmware | 26.47.1026 |\n| MFTï¼ˆMellanox Firmware Toolsï¼‰ | WinMFT_x64_4_34_1_10 |\n\n<aside>\nğŸ’¡\n\nConnect-X 6 é™åˆ¶ï¼šæ­¤ç³»åˆ— NIC é›–å—æ”¯æ´ï¼Œä½†åœ¨ Windows ä¸Šç„¡æ³•æä¾›å®Œæ•´ PTP ç²¾æº–åº¦ã€‚ [[i]](https://dev.epicgames.com/documentation/en-us/unreal-engine/setting-up-smpte-2110-in-unreal-engine#supported-network-cards)\n\n</aside>\n\n## PC 2ï¼šAJA Kona IP æ¥æ”¶ç«¯\n\n- æ­è¼‰ AJA Kona IP å¡ï¼Œæ”¯æ´ ST 2110 ç·¨è§£ç¢¼ï¼Œæ¥æ”¶/ç™¼é€ ST 2110 æµ\n- æ‰€å–å¾—çš„ ST 2110 è¨Šè™Ÿå¯ä»¥ä¾› ZD å·¥å…·ã€AJA Control Roomã€OBS ç­‰è»Ÿé«”æ¥æ”¶èˆ‡ç›£çœ‹\n- ä¸¦å¯é€é NMOS æ§åˆ¶ä¾†æºåˆ‡æ›\n\n| å…ƒä»¶ | ç‰ˆæœ¬ |\n| --- | --- |\n| ä½œæ¥­ç³»çµ± | Windows 11 Pro 25H2 |\n| AJA Kona IP Driver | v17.0 |\n| AJA Control Room | v17.0 |\n| AJA Firmware | KonaIP s2110 - 2023/02/28 |\n\n## PC 3ï¼šCerevrum Broadcast Controller æ§åˆ¶ç«¯\n\n- åŸ·è¡Œ Cerevrum æ§åˆ¶è»Ÿé«”ï¼Œä¸¦è¨»å†Šè‡³ NMOS Registry\n- é€é ISâ€‘05 å”å®šæ§åˆ¶ Kona IP çš„æ¥æ”¶ä¾†æº\n- é€£æ¥è‡³ç®¡ç†äº¤æ›å™¨ï¼ˆMGMTï¼‰ï¼Œèˆ‡å…¶ä»–ç¯€é»é€²è¡Œ NMOS è¨»å†Šèˆ‡æ§åˆ¶é€šè¨Š\n\nğŸ”— ç¶²è·¯é€£ç·šæ¦‚è¿°\n\n- **10G DAC ç›´é€£ï¼š** PC 1 â†’ PC 2ï¼Œå‚³é€ ST 2110 è¦–è¨Šæµ\n- **MGMT ç®¡ç†äº¤æ›å™¨ï¼š** ä¸‰å°ä¸»æ©Ÿçš†é€£æ¥è‡³æ­¤äº¤æ›å™¨ï¼Œç”¨æ–¼ NMOS æ§åˆ¶èˆ‡ç®¡ç†é€šè¨Š\n\n# å®‰è£èˆ‡è¨­å®šæµç¨‹\n\n## å®‰è£ ConnectXâ€‘6 Lx éŸŒé«”æ›´æ–°\n\n1. è‡³ https://network.nvidia.com/support/firmware/mlxup-mft/ é é¢ï¼Œé¸æ“‡ç›¸å°æ‡‰çš„ç‰ˆæœ¬ä¸¦ä¸‹è¼‰éŸŒé«”æ›´æ–°å·¥å…·ã€‚\n2. è‡³ https://network.nvidia.com/support/firmware/firmware-downloads/ é é¢ï¼Œä¸‹è¼‰æ‰€éœ€è¦çš„éŸŒé«”ã€‚\n3. [**Updating Firmware Using a Specific Image**](https://docs.nvidia.com/networking/display/mlxupfwutility#src-49167189_mlxupFirmwareUtilityUserGuide-UpdatingFirmwareUsingaSpecificImage)\n    \n    In order to update the firmware of all NVIDIA adapter cards using a specific firmware image, run the following command:\n    \n    ```bash\n    mlxup -i <file path>\n    ```\n    \n\n## å®‰è£ ConnectXâ€‘6 Lx Windows é©…å‹•ç¨‹å¼ WibOF-2 https://docs.nvidia.com/nvidia-connectx-6-lx-pcie-hhhl-ethernet-adapter-cards-user-manual.pdf\n\n1. è‡³ https://network.nvidia.com/products/adapter-software/ethernet/windows/winof-2/ é é¢ï¼Œé€™æ˜¯ NVIDIA å®˜æ–¹çš„ Windows é©…å‹•ã€‚\n2. é¸æ“‡å°æ‡‰ä½œæ¥­ç³»çµ±çš„é©…å‹•ç¨‹å¼ï¼Œä¸¦ä¸‹è¼‰ã€‚\n3. åŸ·è¡Œä¸¦å®Œæˆå®‰è£ï¼Œå®‰è£å®Œæˆå¾Œé‡é–‹æ©Ÿã€‚\n4. å®‰è£æˆåŠŸå¾Œæœƒåœ¨å·¥ä½œç®¡ç†å“¡çœ‹åˆ°æ­¤ç¶²å¡ã€‚\n    \n    ![image.png](f7bd6e4e-4dd0-4d97-b0a5-d6f13dba56e5.png)\n    \n\n## å®‰è£ Nvidia Rivermax\n\n1. é€²å…¥ Rivermax Getting Start Page https://developer.nvidia.com/networking/rivermax-getting-started (éœ€è¦ç™»å…¥ä¸¦ç”³è«‹æ¬Šé™æ‰èƒ½é€²å…¥é é¢)\n2. å¾ä¸‹è¼‰å€ç€è¦½å„å€‹ç‰ˆæœ¬çš„ Realease Noteï¼Œå°‹æ‰¾ç¬¦åˆè‡ªå·±ç¶²å¡çš„ç‰ˆæœ¬ï¼Œæœ¬å°ˆæ¡ˆä½¿ç”¨ Rivermax_Windows_1.60.6ã€‚\n3. è·Ÿè‘— Installation Guide å®‰è£ï¼Œç”±æ–¼æˆ‘å€‘å·²ç¶“å®‰è£å®Œ WinOF-2 ï¼Œå› æ­¤ç›´æ¥å®‰è£ Rivermaxã€‚\n4. ä½¿ç”¨**ç³»çµ±ç®¡ç†å“¡èº«åˆ†**é–‹å•Ÿå‘½ä»¤æç¤ºå­—å…ƒï¼Œå»åˆ° Rivermax-<Version>-win64.msi æ‰€æ”¾ç½®çš„è³‡æ–™å¤¾ï¼ŒåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š\n    \n    ```jsx\n    Rivermax-<Version>-win64.msi\n    ```\n    \n5. æœƒè·³å‡ºå®‰è£é é¢ï¼š\n    \n    ![image.png](image%201.png)\n    \n6. è·Ÿè‘—å®‰è£æŒ‡ç¤ºå®‰è£ä¸¦å°‡é›»è…¦é‡é–‹æ©Ÿã€‚\n\n## [NVIDIAâ€™s Rivermax SDK License](https://dev.epicgames.com/documentation/en-us/unreal-engine/setting-up-smpte-2110-in-unreal-engine#license)\n\nè«‹è‡³å®˜æ–¹ç¶²ç«™ç”³è«‹ Rivermax é–‹ç™¼æˆæ¬Šï¼šhttps://developer.nvidia.com/rivermax-development-licence-request\nå–å¾—æˆæ¬Šæª”å¾Œï¼Œå°‡å…¶æ”¾ç½®æ–¼ Rivermax DLL æ‰€åœ¨ç›®éŒ„ï¼Œç³»çµ±é è¨­æœƒåœ¨è©²ä½ç½®å°‹æ‰¾æˆæ¬Šæª”ã€‚\nè‹¥å¸Œæœ›å°‡æˆæ¬Šæª”æ”¾åœ¨å…¶ä»–ä½ç½®ï¼ˆä¾‹å¦‚ç¶²è·¯ç£ç¢Ÿæ©Ÿï¼‰ï¼Œå¯ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ï¼š`RIVERMAX_LICENSE_PATH` æŒ‡å®šè‡ªè¨‚çš„æˆæ¬Šæª”è·¯å¾‘ã€‚\n\n## Unreal Rivermax è¨­å®š\n\né–‹å•Ÿä»¥ä¸‹ Plugin ä¸¦é‡å•Ÿ Unreal Editorã€‚\n\n![image.png](f3e873c5-e214-474c-afdb-6b0ca9bdccbb.png)\n\n![image.png](6ac45fbc-0d42-4c59-9ec1-d22a178e4b2d.png)\n\n![image.png](c14ccf70-a316-45be-90f3-4215fbf8c5ce.png)\n\n[SMPTE 2110 UX Reference in Unreal Engine | Unreal Engine 5.6 Documentation | Epic Developer Community](https://dev.epicgames.com/documentation/en-us/unreal-engine/smpte-2110-ux-reference-in-unreal-engine?application_version=5.6)\n\n[SMPTE 2110 Media IO Workflows in Unreal Engine | Unreal Engine 5.6 Documentation | Epic Developer Community](https://dev.epicgames.com/documentation/en-us/unreal-engine/smpte-2110-media-io-workflows-in-unreal-engine?application_version=5.6)\n\n## **Troubleshooting SMPTE 2110**\n\n### Rainbow-colored Video When Opening RivermaxMediaSource\n\nè‹¥åœ¨é–‹å•Ÿ **RivermaxMediaSource** æ™‚çœ‹åˆ°ã€Œå½©è™¹è‰²ï¼ˆrainbow-coloredï¼‰ã€å½±åƒï¼Œè€Œé€™ä¸¦éé æœŸè¡Œç‚ºï¼Œè«‹ç¢ºèª ConnectX NIC çš„ FLEX Parser è¨­å®šæ˜¯å¦æ­£ç¢ºã€‚\n\n1. å®‰è£ `mlxconfig`ï¼ˆMellanox Firmware Tools, MFTï¼‰ï¼šhttps://network.nvidia.com/products/adapter-software/firmware-tools/ ã€‚`mlxconfig` æ˜¯ Mellanox Firmware Toolsï¼ˆMFTï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ–¼æŸ¥è©¢èˆ‡è¨­å®š ConnectX NIC çš„ç¡¬é«”åƒæ•¸ã€‚\n2. é©—è­‰ FLEX Parser è¨­å®š\n    \n    ä½¿ç”¨ç³»çµ±ç®¡ç†å“¡èº«åˆ†åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œç¢ºèªå…©å€‹åƒæ•¸çš„è¼¸å‡ºæ˜¯å¦ä¸€è‡´ï¼š\n    \n    ```jsx\n    mlxconfig.exe q | findstr \"FLEX_PARSER_PROFILE_ENABLE PROG_PARSE_GRAPH\"\n    ```\n    \n    [è«‹ç¢ºä¿é€™å…©å€‹åƒæ•¸çš„è¼¸å‡ºå…§å®¹å®Œå…¨ä¸€è‡´ã€‚](https://dev.epicgames.com/community/api/documentation/image/65a2f86a-54c9-45df-a99a-f1d73229b093?resizing_type=fit)\n    \n    è«‹ç¢ºä¿é€™å…©å€‹åƒæ•¸çš„è¼¸å‡ºå…§å®¹å®Œå…¨ä¸€è‡´ã€‚\n    \n    è‹¥ä¸ä¸€è‡´ï¼Œå¯èƒ½å°è‡´ NIC ç„¡æ³•æ­£ç¢ºè§£æ RTP Headerï¼Œé€ æˆå½±åƒå‘ˆç¾å½©è™¹è‰²æˆ–éŒ¯ä½ã€‚\n    \n3. å¦‚ä¸ä¸€è‡´ï¼Œè«‹ä½¿ç”¨ç³»çµ±ç®¡ç†å“¡èº«åˆ†åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤æŸ¥è©¢è£ç½®åç¨±ï¼š\n    \n    ```jsx\n    mst status\n    ```\n    \n    å¦‚æœæœå‹™æœªå•Ÿå‹•ï¼Œè«‹è¼¸å…¥ï¼š\n    \n    ```jsx\n    mst start\n    ```\n    \n    ç„¶å¾Œå†è¼¸å…¥ `mst status` æœƒçœ‹åˆ°é¡ä¼¼ä¸‹åˆ—è¼¸å‡ºï¼š\n    \n    ![image.png](image%202.png)\n    \n    åœ–ä¸­ mt4127_pciconf0 ä½ç½®çš„å€¼å³ç‚ºä½ çš„è£ç½®åç¨±ã€‚\n    \n4. å¡«å…¥ä½ çš„è£ç½®åç¨±ï¼Œè¼¸å…¥ä¸‹åˆ—æŒ‡ä»¤æ›´æ”¹è¨­å®šï¼š\n    \n    ```jsx\n    mlxconfig.exe -d <ä½ çš„è£ç½®åç¨±> set FLEX_PARSER_PROFILE_ENABLE=1\n    mlxconfig.exe -d <ä½ çš„è£ç½®åç¨±> set PROG_PARSE_GRAPH=1\n    mlxconfig.exe -d <ä½ çš„è£ç½®åç¨±> reset\n    ```\n    \n    å¦‚ï¼š\n    \n    ```jsx\n    mlxconfig.exe -d mt4127_pciconf0 set FLEX_PARSER_PROFILE_ENABLE=1\n    mlxconfig.exe -d mt4127_pciconf0 set PROG_PARSE_GRAPH=1\n    mlxconfig.exe -d mt4127_pciconf0 reset\n    ```\n    \n5. æ›´æ”¹å®Œå¾Œè¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ç¢ºèªè¼¸å‡ºï¼š\n    \n    ```jsx\n    mlxconfig.exe q | findstr \"FLEX_PARSER_PROFILE_ENABLE PROG_PARSE_GRAPH\"\n    ```\n    \n\n# å¾ŒçºŒç ”ç©¶æ–¹å‘\n\n## GPU Direct\n\n- ç ”ç©¶ Rivermax èˆ‡ GPUDirect çš„æ•´åˆæ–¹å¼ï¼Œè©•ä¼°æ˜¯å¦èƒ½è®“å½±åƒè³‡æ–™ç›´æ¥åœ¨ GPU èˆ‡ NIC ä¹‹é–“å‚³è¼¸ï¼Œæ¸›å°‘ CPU ä»‹å…¥ã€‚\n- æ¸¬è©¦ Unreal Engine åœ¨å•Ÿç”¨ GPUDirect æ™‚çš„å»¶é²æ”¹å–„å¹…åº¦ï¼Œä¸¦ç¢ºèªä¸åŒ GPU/NIC/Driver çµ„åˆçš„ç›¸å®¹æ€§ã€‚\n\n## NMOS for Rivermaxï¼ˆISâ€‘04 / ISâ€‘05ï¼‰\n\n- ç ”ç©¶ Rivermax æ˜¯å¦èƒ½é€é NMOS API èˆ‡ç¾æœ‰çš„ Broadcast Controllerï¼ˆå¦‚ Cerebrumã€VSMã€Evertz Magnumï¼‰é€²è¡Œè‡ªå‹•åŒ–è¨»å†Šèˆ‡è·¯ç”±ã€‚\n- å»ºç«‹ UE â†’ NMOS â†’ 2110 Receiver çš„å®Œæ•´æ§åˆ¶æµç¨‹ï¼Œè®“ Unreal Engine æˆç‚ºå¯è¢« NMOS ç®¡ç†çš„ã€ŒSender Nodeã€ã€‚\n- è©•ä¼°æ˜¯å¦èƒ½å°‡ Unreal Engine çš„ 2110 Stream Metadataï¼ˆFormatã€Framerateã€Colorimetryï¼‰è‡ªå‹•åŒæ­¥åˆ° NMOS Registryã€‚\n\n## ST 2022â€‘7 Seamless Switching\n\n- ç ”ç©¶ Unreal Engine + Rivermax æ˜¯å¦èƒ½åŒæ™‚è¼¸å‡º **A/B é›™è·¯ 2110 Stream**ï¼Œä»¥æ”¯æ´ 2022â€‘7 çš„ç„¡ç¸«åˆ‡æ›ã€‚\n- æ¸¬è©¦æ¥æ”¶ç«¯ï¼ˆå¦‚ AJA Kona IPã€Grass Valleyã€Imagineã€Sonyï¼‰åœ¨ 2022â€‘7 ä¸‹çš„åˆ‡æ›å»¶é²èˆ‡å®¹éŒ¯èƒ½åŠ›ã€‚\n- æ¢ç´¢æ˜¯å¦èƒ½åœ¨ UE å…§éƒ¨å»ºç«‹ã€Œé›™ç·¨ç¢¼è·¯å¾‘ã€æˆ–ã€Œé›™ NICã€æ¶æ§‹ï¼Œä»¥æ”¯æ´é«˜å¯é åº¦çš„ Live Production Pipelineã€‚"
    }
]